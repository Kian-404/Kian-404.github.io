{"version":3,"sources":["webpack:///src/components/singer/singer.vue","webpack:///./src/components/singer/singer.vue?02bd","webpack:///./src/components/singer/singer.vue","webpack:///./src/api/singer.js"],"names":["singer_singer","name","mixins","components","Scroll","scroll_scroll","loading","data","singers","pulldown","computed","extends_default","Object","vuex_esm","created","this","_getSingerList","listenScroll","methods","handlePlaylist","playlist","$refs","singerUl","bottom","length","style","paddingBottom","scrollView","refresh","that","singer","then","res","code","list","artists","_newData","dataList","newList","forEach","item","index","isOn","key","Findex","push","id","Fsinger_id","mid","Fsinger_mid","Fsinger_name","img","title","property","newList2","sort","a","b","charCodeAt","toTouchScroll","scrollToElement","listView","toSingerDetail","$router","path","setSinger","components_singer_singer","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","_l","item2","on","click","$event","directives","rawName","value","expression","alt","_v","_s","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","axios","get","HOSTURL","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","resolve","singerId","params"],"mappings":"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","file":"static/js/7.710cde65f82a2e13a3d6.js","sourcesContent":["<template>\n  <div class=\"app\">\n    <Scroll v-if=\"singers.length\" :data=\"singers\" class=\"scroll\" :listenScroll=\"listenScroll\" ref=\"scrollView\">\n      <ul ref=\"singerUl\">\n        <!-- <li class=\"li-box\" v-for=\"(item1, index) in singers\" :key=\"index\" ref=\"listView\"> -->\n          <!-- <h2 class=\"title\">{{item1.title}}</h2> -->\n          <!-- <ul> -->\n            <li @click=\"toSingerDetail(item2)\" class=\"li-con\" v-for=\"(item2, index) in singers\" :key=\"index\">\n              <img v-lazy=\"item2.img1v1Url\" :alt=\"item2.name\">\n              <span class=\"name\">{{item2.name}}</span>\n            </li>\n          <!-- </ul> -->\n        <!-- </li> -->\n      </ul>\n      <!-- <h2 id=\"fixed\" class=\"title\">A</h2> -->\n    </Scroll>\n    <!-- <div class=\"tab-right\">\n      <ul>\n        <li v-for=\"(item, index) in singers\" :key=\"index\" @touchstart.stop.prevent=\"toTouchScroll(index)\">{{ item.title }}</li>\n      </ul>\n    </div> -->\n    <!-- 歌手详情子路由 -->\n    <transition name=\"fade\">\n      <router-view></router-view>\n    </transition>\n    <!-- loading -->\n    <div class=\"loading\" v-show=\"singers.length === 0?1:0\">\n      <loading></loading>\n    </div>\n  </div>\n</template>\n\n<script>\nimport loading from \"base/loading/loading\";\nimport Scroll from \"base/scroll/scroll\";\nimport { getSingerList } from \"api/singer\";\n// import { ERR_OK } from \"api/config\";\nimport { mapMutations, mapGetters } from \"vuex\";\nimport { playlistMixin } from \"assets/js/mixin\";\nconst ERR_OK = 200;\nexport default {\n  name: \"Singer\",\n  mixins: [playlistMixin],\n  components: {\n    Scroll,\n    loading\n  },\n  data() {\n    return {\n      singers: [],\n      pulldown: true\n    };\n  },\n  computed: {\n    ...mapGetters([\"playlist\"])\n  },\n  created() {\n    this._getSingerList();\n    this.listenScroll = true;\n  },\n  methods: {\n    handlePlaylist(playlist) {\n      if (this.$refs.singerUl) {\n        const bottom = playlist.length > 0 ? \"60px\" : \"\";\n\n        this.$refs.singerUl.style.paddingBottom = bottom;\n        this.$refs.scrollView.refresh();\n      }\n    },\n    _getSingerList: function() {\n      var that = this;\n      getSingerList().then(res => {\n        console.log(res);\n        if (res.code === ERR_OK) {\n          that.singers = res.list.artists;\n          //  (that.singers);\n          // that._newData(res.list.artists);\n        }\n      });\n    },\n    /* 改变封装原有数据 */\n    _newData: function(dataList) {\n      var newList = {};\n      dataList.forEach(function(item, index) {\n        // 遍历原有数据数组\n        var isOn = 0; // 新建拼接后数据对象\n        for (let key in newList) {\n          // 遍历isOn对象是否已存在原数组遍历时的字母\n          if (key === item.Findex) {\n            isOn = 1;\n          }\n        }\n        if (isOn === 1) {\n          newList[item.Findex].list.push({\n            // 如果已存在则直接向这组数据中push这个元素\n            id: item.Fsinger_id,\n            mid: item.Fsinger_mid,\n            name: item.Fsinger_name,\n            img: `https://y.gtimg.cn/music/photo_new/T001R300x300M000${\n              item.Fsinger_mid\n            }.jpg?max_age=2592000`\n          });\n          isOn = 0;\n        } else if (isOn === 0) {\n          // 如果没有则新建这组数据并把元素push进去\n          if (item.Findex === \"9\") {\n            item.Findex = \"其他\";\n          }\n          newList[item.Findex] = {\n            title: item.Findex,\n            list: [\n              {\n                id: item.Fsinger_id,\n                mid: item.Fsinger_mid,\n                name: item.Fsinger_name,\n                img: `https://y.gtimg.cn/music/photo_new/T001R300x300M000${\n                  item.Fsinger_mid\n                }.jpg?max_age=2592000`\n              }\n            ]\n          };\n        }\n      });\n      var newList2 = [];\n      for (let key in newList) {\n        // 数据对象转为数组\n        newList2.push(newList[key]);\n      }\n      /* 按数组中对象属性字母排序 */\n      function compare(property) {\n        return function(a, b) {\n          var value1 = a[property].charCodeAt();\n          var value2 = b[property].charCodeAt();\n          return value1 - value2;\n        };\n      }\n      newList2.sort(compare(\"title\"));\n      this.singers = newList2;\n    },\n    toTouchScroll: function(index) {\n      // alert('5')\n      this.$refs.scrollView.scrollToElement(this.$refs.listView[index], 0);\n    },\n    // scroll: function(pos) {\n    //   // console.log(pos.y);\n    // },\n    toSingerDetail: function(item) {\n      this.$router.push({\n        path: `/singer/${item.id}`\n      });\n      this.setSinger(item);\n    },\n    ...mapMutations({\n      setSinger: \"SET_SINGER\"\n    })\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\">\n@import \"assets/css/mixin.scss\";\n.scroll {\n  position: relative;\n  width: 100vw;\n  height: 87vh;\n  overflow: hidden;\n}\n.app {\n  position: relative;\n  // display: block;\n  // width: 100%;\n  // height: 100%;\n  // overflow: hidden;\n}\n.li-box {\n  width: 100%;\n  padding-bottom: rem(30);\n}\n.title {\n  width: 100%;\n  height: rem(30);\n  padding-left: rem(20);\n  box-sizing: border-box;\n  color: hsla(0, 0%, 100%, 0.5);\n  background: #333;\n  font-size: rem(12);\n  line-height: rem(30);\n}\n.li-con {\n  width: 100%;\n  height: rem(70);\n  padding: rem(20) 0 0 rem(30);\n  box-sizing: border-box;\n}\nimg {\n  width: rem(50);\n  height: rem(50);\n  line-height: rem(50);\n  border-radius: rem(50);\n  vertical-align: middle;\n}\n.name {\n  display: inline-block;\n  font-size: rem(14);\n  margin-left: rem(20);\n  color: hsla(0, 0%, 100%, 0.5);\n  vertical-align: middle;\n}\n/* 侧面导航字母 */\n.tab-right {\n  position: absolute;\n  z-index: 300;\n  right: 0;\n  top: 50%;\n  transform: translateY(-50%);\n  width: rem(20);\n  padding: rem(20) 0;\n  border-radius: rem(10);\n  background: rgba(0, 0, 0, 0.3);\n  font-family: Helvetica;\n}\n.tab-right li {\n  padding-bottom: rem(6);\n  line-height: 1;\n  text-align: center;\n  color: hsla(0, 0%, 100%, 0.5);\n  font-size: rem(12);\n}\n#fixed {\n  position: absolute;\n  top: rem(-1);\n  left: 0;\n}\n/* 子路由进去动画 */\n.fade-enter-active,\n.fade-leave-active {\n  transition: all 0.3s;\n}\n.fade-enter,\n.fade-leave-to {\n  transform: translate3d(100%, 0, 0);\n}\n.loading {\n  position: fixed;\n  width: 100%;\n  top: 50%;\n  transform: translateY(-50%);\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/singer/singer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app\"},[(_vm.singers.length)?_c('Scroll',{ref:\"scrollView\",staticClass:\"scroll\",attrs:{\"data\":_vm.singers,\"listenScroll\":_vm.listenScroll}},[_c('ul',{ref:\"singerUl\"},_vm._l((_vm.singers),function(item2,index){return _c('li',{key:index,staticClass:\"li-con\",on:{\"click\":function($event){_vm.toSingerDetail(item2)}}},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(item2.img1v1Url),expression:\"item2.img1v1Url\"}],attrs:{\"alt\":item2.name}}),_vm._v(\" \"),_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(item2.name))])])}))]):_vm._e(),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('router-view')],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.singers.length === 0?1:0),expression:\"singers.length === 0?1:0\"}],staticClass:\"loading\"},[_c('loading')],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-78ee1298\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/singer/singer.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-78ee1298\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./singer.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./singer.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./singer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-78ee1298\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./singer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-78ee1298\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/singer/singer.vue\n// module id = null\n// module chunks = ","// import jsonp from 'assets/js/jsonp'\n// import {\n//   commonParams,\n//   options\n// } from './config'\nimport axios from 'axios';\nimport {HOSTURL} from './config'\n\nexport function getSingerList() {\n  // const url = 'https://c.y.qq.com/v8/fcg-bin/v8.fcg'\n\n  // const data = Object.assign({}, commonParams, {\n  //   channel: 'singer',\n  //   page: 'list',\n  //   key: 'all_all_all',\n  //   pagesize: 100,\n  //   pagenum: 1,\n  //   hostUin: 0,\n  //   needNewCode: 0,\n  //   platform: 'yqq'\n  // })\n\n  // return jsonp(url, data, options)\n\n  const url = '/toplist/artist'\n\n  return axios.get(`${HOSTURL}${url}`).then((res) => {\n    return Promise.resolve(res.data);\n  })\n}\n\nexport function getSingerDetail(singerId) {\n  // const url = 'https://c.y.qq.com/v8/fcg-bin/fcg_v8_singer_track_cp.fcg'\n\n  // const data = Object.assign({}, commonParams, {\n  //   hostUin: 0,\n  //   needNewCode: 0,\n  //   platform: 'yqq',\n  //   order: 'listen',\n  //   begin: 0,\n  //   num: 80,\n  //   songstatus: 1,\n  //   singermid: singerId // 确定请求歌手详情的参数\n  // })\n\n  // return jsonp(url, data, options)\n\n  console.log(singerId);\n  const url = '/artists'\n\n  const data = {\n    id: singerId\n  }\n\n  return axios.get(`${HOSTURL}${url}`, {\n    params: data\n  }).then((res) => {\n    return Promise.resolve(res.data);\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/singer.js"],"sourceRoot":""}